<div class="relative min-h-screen w-full flex flex-col items-center justify-center overflow-hidden bg-gradient-to-b from-[#0f172a] via-[#111827] to-black">
  <!-- Fondo cielo estrellado animado con resplandor sutil -->
  <div class="absolute inset-0 z-0 pointer-events-none">
    <div class="w-full h-full animate-fade-in">
      <canvas id="starfield-bg" class="w-full h-full block"></canvas>
      <div class="absolute inset-0 bg-gradient-to-b from-[#0f172a] via-[#111827] to-black pointer-events-none"></div>
      <div class="absolute inset-0 bg-gradient-radial from-[#10b981]/10 via-transparent to-transparent pointer-events-none"></div>
      <div class="absolute inset-0 bg-gradient-to-b from-[#0f172a]/80 to-black/90 blur-2xl"></div>
    </div>
  </div>
  <!-- Logo minimalista -->
  <img src="images/logo_transparent.png" alt="Logo" class="w-32 mb-10 z-10 drop-shadow-xl select-none" style="will-change: transform;">
  <!-- Formulario elegante y minimalista -->
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="z-10 bg-white/5 backdrop-blur-lg border border-white/10 p-8 rounded-3xl shadow-2xl w-full max-w-md animate-slide-in">
    <h2 class="text-3xl font-bold text-white mb-8 text-center tracking-wide drop-shadow">Acceso Seguro</h2>
    <div class="mb-4 relative group" #usernameGroup>
      <input formControlName="username" type="text" placeholder="Usuario"
        class="w-full px-4 py-3 mb-4 rounded-lg bg-black/90 text-white placeholder-gray-400 shadow-md focus:shadow-lg focus:border-[#e53935] focus:ring-2 focus:ring-[#e53935]/50 transition-colors duration-300 outline-none border-gray-700"
        [class.border-white]="loginForm.get('username')?.value"
        autocomplete="username"
      >
    </div>
    <div class="mb-4 relative group" #passwordGroup>
      <input formControlName="password" [type]="hidePassword ? 'password' : 'text'" placeholder="ContraseÃ±a"
        class="w-full px-4 py-3 mb-4 rounded-lg bg-black/90 text-white placeholder-gray-400 shadow-md focus:shadow-lg focus:border-[#e53935] focus:ring-2 focus:ring-[#e53935]/50 transition-colors duration-300 outline-none pr-12 border-gray-700"
        [class.border-white]="loginForm.get('password')?.value"
        autocomplete="current-password"
      >
      <button type="button" (click)="hidePassword = !hidePassword" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#10b981] focus:outline-none">
        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
    </div>
    <button type="submit" [disabled]="loading" class="w-full px-4 py-3 mt-2 rounded-lg bg-[#10b981] text-white font-semibold shadow-md hover:shadow-lg hover:bg-[#059669] focus:ring-2 focus:ring-[#10b981]/50 transition-colors duration-300">Entrar</button>
    <div *ngIf="error" class="mt-6 text-[#e53935] text-center font-medium">{{ error }}</div>
  </form>
  <app-loading-screen *ngIf="loading" class="z-20"></app-loading-screen>
  <!-- Script para estrellas animadas -->
  <script>
    // Starfield animation for background
    (() => {
      const canvas = document.getElementById('starfield-bg');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      let w, h, stars = [];
      function resize() {
        w = window.innerWidth;
        h = window.innerHeight;
        canvas.width = w;
        canvas.height = h;
      }
      function createStars() {
        stars = [];
        for (let i = 0; i < 90; i++) {
          const shine = Math.random() > 0.85;
          stars.push({
            x: Math.random() * w,
            y: Math.random() * h,
            r: shine ? Math.random() * 1.8 + 0.8 : Math.random() * 0.8 + 0.2,
            o: shine ? Math.random() * 0.4 + 0.7 : Math.random() * 0.3 + 0.3,
            d: Math.random() * 0.5 + 0.5,
            shine
          });
        }
      }
      function animate() {
        ctx.clearRect(0, 0, w, h);
        for (let s of stars) {
          ctx.save();
          ctx.globalAlpha = s.o + Math.sin(Date.now() * 0.002 * s.d + s.x) * 0.2;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r, 0, 2 * Math.PI);
          ctx.fillStyle = s.shine ? '#fff' : '#b6e3ff';
          ctx.shadowColor = s.shine ? '#10b981' : '#111827';
          ctx.shadowBlur = s.shine ? 16 : 6;
          ctx.fill();
          ctx.restore();
        }
        requestAnimationFrame(animate);
      }
      window.addEventListener('resize', () => {
        resize();
        createStars();
      });
      resize();
      createStars();
      animate();
    })();
  </script>
</div>
